(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=1)})([function(module,exports,__webpack_require__){(function(){"use strict";function polyfill(){var w=window;var d=document;if("scrollBehavior"in d.documentElement.style&&w.__forceSmoothScrollPolyfill__!==true){return}var Element=w.HTMLElement||w.Element;var SCROLL_TIME=468;var original={scroll:w.scroll||w.scrollTo,scrollBy:w.scrollBy,elementScroll:Element.prototype.scroll||scrollElement,scrollIntoView:Element.prototype.scrollIntoView};var now=w.performance&&w.performance.now?w.performance.now.bind(w.performance):Date.now;function isMicrosoftBrowser(userAgent){var userAgentPatterns=["MSIE ","Trident/","Edge/"];return new RegExp(userAgentPatterns.join("|")).test(userAgent)}var ROUNDING_TOLERANCE=isMicrosoftBrowser(w.navigator.userAgent)?1:0;function scrollElement(x,y){this.scrollLeft=x;this.scrollTop=y}function ease(k){return.5*(1-Math.cos(Math.PI*k))}function shouldBailOut(firstArg){if(firstArg===null||typeof firstArg!=="object"||firstArg.behavior===undefined||firstArg.behavior==="auto"||firstArg.behavior==="instant"){return true}if(typeof firstArg==="object"&&firstArg.behavior==="smooth"){return false}throw new TypeError("behavior member of ScrollOptions "+firstArg.behavior+" is not a valid value for enumeration ScrollBehavior.")}function hasScrollableSpace(el,axis){if(axis==="Y"){return el.clientHeight+ROUNDING_TOLERANCE<el.scrollHeight}if(axis==="X"){return el.clientWidth+ROUNDING_TOLERANCE<el.scrollWidth}}function canOverflow(el,axis){var overflowValue=w.getComputedStyle(el,null)["overflow"+axis];return overflowValue==="auto"||overflowValue==="scroll"}function isScrollable(el){var isScrollableY=hasScrollableSpace(el,"Y")&&canOverflow(el,"Y");var isScrollableX=hasScrollableSpace(el,"X")&&canOverflow(el,"X");return isScrollableY||isScrollableX}function findScrollableParent(el){while(el!==d.body&&isScrollable(el)===false){el=el.parentNode||el.host}return el}function step(context){var time=now();var value;var currentX;var currentY;var elapsed=(time-context.startTime)/SCROLL_TIME;elapsed=elapsed>1?1:elapsed;value=ease(elapsed);currentX=context.startX+(context.x-context.startX)*value;currentY=context.startY+(context.y-context.startY)*value;context.method.call(context.scrollable,currentX,currentY);if(currentX!==context.x||currentY!==context.y){w.requestAnimationFrame(step.bind(w,context))}}function smoothScroll(el,x,y){var scrollable;var startX;var startY;var method;var startTime=now();if(el===d.body){scrollable=w;startX=w.scrollX||w.pageXOffset;startY=w.scrollY||w.pageYOffset;method=original.scroll}else{scrollable=el;startX=el.scrollLeft;startY=el.scrollTop;method=scrollElement}step({scrollable:scrollable,method:method,startTime:startTime,startX:startX,startY:startY,x:x,y:y})}w.scroll=w.scrollTo=function(){if(arguments[0]===undefined){return}if(shouldBailOut(arguments[0])===true){original.scroll.call(w,arguments[0].left!==undefined?arguments[0].left:typeof arguments[0]!=="object"?arguments[0]:w.scrollX||w.pageXOffset,arguments[0].top!==undefined?arguments[0].top:arguments[1]!==undefined?arguments[1]:w.scrollY||w.pageYOffset);return}smoothScroll.call(w,d.body,arguments[0].left!==undefined?~~arguments[0].left:w.scrollX||w.pageXOffset,arguments[0].top!==undefined?~~arguments[0].top:w.scrollY||w.pageYOffset)};w.scrollBy=function(){if(arguments[0]===undefined){return}if(shouldBailOut(arguments[0])){original.scrollBy.call(w,arguments[0].left!==undefined?arguments[0].left:typeof arguments[0]!=="object"?arguments[0]:0,arguments[0].top!==undefined?arguments[0].top:arguments[1]!==undefined?arguments[1]:0);return}smoothScroll.call(w,d.body,~~arguments[0].left+(w.scrollX||w.pageXOffset),~~arguments[0].top+(w.scrollY||w.pageYOffset))};Element.prototype.scroll=Element.prototype.scrollTo=function(){if(arguments[0]===undefined){return}if(shouldBailOut(arguments[0])===true){if(typeof arguments[0]==="number"&&arguments[1]===undefined){throw new SyntaxError("Value could not be converted")}original.elementScroll.call(this,arguments[0].left!==undefined?~~arguments[0].left:typeof arguments[0]!=="object"?~~arguments[0]:this.scrollLeft,arguments[0].top!==undefined?~~arguments[0].top:arguments[1]!==undefined?~~arguments[1]:this.scrollTop);return}var left=arguments[0].left;var top=arguments[0].top;smoothScroll.call(this,this,typeof left==="undefined"?this.scrollLeft:~~left,typeof top==="undefined"?this.scrollTop:~~top)};Element.prototype.scrollBy=function(){if(arguments[0]===undefined){return}if(shouldBailOut(arguments[0])===true){original.elementScroll.call(this,arguments[0].left!==undefined?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,arguments[0].top!==undefined?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop);return}this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior})};Element.prototype.scrollIntoView=function(){if(shouldBailOut(arguments[0])===true){original.scrollIntoView.call(this,arguments[0]===undefined?true:arguments[0]);return}var scrollableParent=findScrollableParent(this);var parentRects=scrollableParent.getBoundingClientRect();var clientRects=this.getBoundingClientRect();if(scrollableParent!==d.body){smoothScroll.call(this,scrollableParent,scrollableParent.scrollLeft+clientRects.left-parentRects.left,scrollableParent.scrollTop+clientRects.top-parentRects.top);if(w.getComputedStyle(scrollableParent).position!=="fixed"){w.scrollBy({left:parentRects.left,top:parentRects.top,behavior:"smooth"})}}else{w.scrollBy({left:clientRects.left,top:clientRects.top,behavior:"smooth"})}}}if(true){module.exports={polyfill:polyfill}}else{}})()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);class videoPlayer{constructor(video,button){this.video=video;this.button=button;this.button.addEventListener("click",()=>{this.playVideo()})}playVideo(){if(!this.video.parentNode.classList.contains("active")){this.video.controls=true;this.video.play();this.video.parentNode.classList.add("active")}else{this.video.controls=false;this.video.pause();this.button.parentNode.classList.remove("active")}}}class popupFunc{constructor(popup,button){this.button=button;this.popup=popup;this.openPopupFunc=this.openPopup.bind(this);this.closePopupFunc=this.closePopup.bind(this);if(Array.isArray(this.button)){this.button.forEach(elem=>{elem.addEventListener("click",this.openPopupFunc)})}else{this.button.addEventListener("click",this.openPopupFunc)}this.popup.querySelector(".close").addEventListener("click",this.closePopupFunc);this.popup.parentNode.addEventListener("click",this.closePopupFunc)}openPopup(event){event.preventDefault();this.popup.classList.add("open");this.popup.parentNode.classList.add("open")}closePopup(event){if(!event.target.classList.contains("close")&&event.target.closest(".popup")!==null){event.stopPropagation()}else{this.popup.classList.remove("open");this.popup.parentNode.classList.remove("open")}}}class BurgerMenu{constructor(popup,burger){this.burger=burger;this.popup=popup;let thisOpenPopup=this.openPopup.bind(this);let thisClosePopup=this.closePopup.bind(this);this.burger.addEventListener("click",thisOpenPopup);this.popup.querySelector(".close").addEventListener("click",thisClosePopup);document.querySelector("header .order.close").addEventListener("click",thisClosePopup);this.popup.querySelectorAll("a").forEach(elem=>elem.addEventListener("click",thisClosePopup))}openPopup(){this.popup.classList.add("open");document.querySelector(".user-panel").classList.add("active")}closePopup(){this.popup.classList.remove("open");document.querySelector(".user-panel").classList.remove("active")}}var smoothscroll=__webpack_require__(0);var smoothscroll_default=__webpack_require__.n(smoothscroll);smoothscroll_default.a.polyfill();function iOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}if(document.querySelector("section.info .image")){let allImages=document.querySelectorAll("section.info .image img");let mySiema=new Siema({selector:"section.info .image",duration:700,easing:"ease-out",perPage:1,startIndex:0,draggable:false,multipleDrag:true,threshold:20,loop:true,rtl:false,onInit:function(){allImages[this.currentSlide].classList.remove("active");setTimeout(()=>{this.next();setTimeout(()=>{allImages[this.currentSlide].classList.add("active")},500)},500);setInterval(()=>{allImages[this.currentSlide].classList.remove("active");setTimeout(()=>{this.next();setTimeout(()=>{allImages[this.currentSlide].classList.add("active")},500)},500)},6500)},onChange:function(){}})}if(document.querySelector(".reviews .video")){document.querySelectorAll(".reviews .video").forEach(elem=>{new videoPlayer(elem.querySelector("video"),elem.querySelector(".play-btn"))})}if(document.querySelector(".wrapper .popup")){new popupFunc(document.querySelector(".wrapper .popup"),[document.querySelector("header .order"),document.querySelector("section.info .btn")])}new BurgerMenu(document.querySelector("header nav"),document.querySelector("header .burger"));function SmoothVerticalScrolling(e,time,where){let eTop;if(iOS){eTop=e.offsetTop}else{eTop=e.getBoundingClientRect().top}window.scrollTo({top:eTop-50,behavior:"smooth"})}document.querySelectorAll("header nav a").forEach(link=>{link.addEventListener("click",()=>{SmoothVerticalScrolling(document.querySelector(`${link.dataset.href}`),1500,"top")})})}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsibW9kdWxlcyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJnZXREZWZhdWx0IiwiZ2V0TW9kdWxlRXhwb3J0cyIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInBvbHlmaWxsIiwidyIsIndpbmRvdyIsImRvY3VtZW50IiwiZG9jdW1lbnRFbGVtZW50Iiwic3R5bGUiLCJfX2ZvcmNlU21vb3RoU2Nyb2xsUG9seWZpbGxfXyIsIkVsZW1lbnQiLCJIVE1MRWxlbWVudCIsIlNDUk9MTF9USU1FIiwib3JpZ2luYWwiLCJzY3JvbGwiLCJzY3JvbGxUbyIsInNjcm9sbEJ5IiwiZWxlbWVudFNjcm9sbCIsInNjcm9sbEVsZW1lbnQiLCJzY3JvbGxJbnRvVmlldyIsIm5vdyIsInBlcmZvcm1hbmNlIiwiRGF0ZSIsImlzTWljcm9zb2Z0QnJvd3NlciIsInVzZXJBZ2VudCIsInVzZXJBZ2VudFBhdHRlcm5zIiwiUmVnRXhwIiwiam9pbiIsInRlc3QiLCJST1VORElOR19UT0xFUkFOQ0UiLCJuYXZpZ2F0b3IiLCJ4IiwieSIsInRoaXMiLCJzY3JvbGxMZWZ0Iiwic2Nyb2xsVG9wIiwiZWFzZSIsImsiLCJNYXRoIiwiY29zIiwiUEkiLCJzaG91bGRCYWlsT3V0IiwiZmlyc3RBcmciLCJiZWhhdmlvciIsInVuZGVmaW5lZCIsIlR5cGVFcnJvciIsImhhc1Njcm9sbGFibGVTcGFjZSIsImVsIiwiYXhpcyIsImNsaWVudEhlaWdodCIsInNjcm9sbEhlaWdodCIsImNsaWVudFdpZHRoIiwic2Nyb2xsV2lkdGgiLCJjYW5PdmVyZmxvdyIsIm92ZXJmbG93VmFsdWUiLCJnZXRDb21wdXRlZFN0eWxlIiwiaXNTY3JvbGxhYmxlIiwiaXNTY3JvbGxhYmxlWSIsImlzU2Nyb2xsYWJsZVgiLCJmaW5kU2Nyb2xsYWJsZVBhcmVudCIsImJvZHkiLCJwYXJlbnROb2RlIiwiaG9zdCIsInN0ZXAiLCJjb250ZXh0IiwidGltZSIsImN1cnJlbnRYIiwiY3VycmVudFkiLCJlbGFwc2VkIiwic3RhcnRUaW1lIiwic3RhcnRYIiwic3RhcnRZIiwibWV0aG9kIiwic2Nyb2xsYWJsZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInNtb290aFNjcm9sbCIsInNjcm9sbFgiLCJwYWdlWE9mZnNldCIsInNjcm9sbFkiLCJwYWdlWU9mZnNldCIsImFyZ3VtZW50cyIsImxlZnQiLCJ0b3AiLCJTeW50YXhFcnJvciIsInNjcm9sbGFibGVQYXJlbnQiLCJwYXJlbnRSZWN0cyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImNsaWVudFJlY3RzIiwicG9zaXRpb24iLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwidmlkZW9QbGF5ZXIiLCJbb2JqZWN0IE9iamVjdF0iLCJ2aWRlbyIsImJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJwbGF5VmlkZW8iLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImNvbnRyb2xzIiwicGxheSIsImFkZCIsInBhdXNlIiwicmVtb3ZlIiwicG9wdXBGdW5jIiwicG9wdXAiLCJvcGVuUG9wdXBGdW5jIiwib3BlblBvcHVwIiwiY2xvc2VQb3B1cEZ1bmMiLCJjbG9zZVBvcHVwIiwiQXJyYXkiLCJpc0FycmF5IiwiZm9yRWFjaCIsImVsZW0iLCJxdWVyeVNlbGVjdG9yIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInRhcmdldCIsImNsb3Nlc3QiLCJzdG9wUHJvcGFnYXRpb24iLCJCdXJnZXJNZW51IiwiYnVyZ2VyIiwidGhpc09wZW5Qb3B1cCIsInRoaXNDbG9zZVBvcHVwIiwicXVlcnlTZWxlY3RvckFsbCIsInNtb290aHNjcm9sbCIsInNtb290aHNjcm9sbF9kZWZhdWx0IiwiYSIsImlPUyIsImluY2x1ZGVzIiwicGxhdGZvcm0iLCJhbGxJbWFnZXMiLCJteVNpZW1hIiwiU2llbWEiLCJzZWxlY3RvciIsImR1cmF0aW9uIiwiZWFzaW5nIiwicGVyUGFnZSIsInN0YXJ0SW5kZXgiLCJkcmFnZ2FibGUiLCJtdWx0aXBsZURyYWciLCJ0aHJlc2hvbGQiLCJsb29wIiwicnRsIiwib25Jbml0IiwiY3VycmVudFNsaWRlIiwic2V0VGltZW91dCIsIm5leHQiLCJzZXRJbnRlcnZhbCIsIm9uQ2hhbmdlIiwiU21vb3RoVmVydGljYWxTY3JvbGxpbmciLCJlIiwid2hlcmUiLCJlVG9wIiwib2Zmc2V0VG9wIiwibGluayIsImRhdGFzZXQiLCJocmVmIl0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxTQUVULElBQUlDLGlCQUFtQixHQUd2QixTQUFTQyxvQkFBb0JDLFVBRzVCLEdBQUdGLGlCQUFpQkUsVUFBVyxDQUM5QixPQUFPRixpQkFBaUJFLFVBQVVDLFFBR25DLElBQUlDLE9BQVNKLGlCQUFpQkUsVUFBWSxDQUN6Q0csRUFBR0gsU0FDSEksRUFBRyxNQUNISCxRQUFTLElBSVZKLFFBQVFHLFVBQVVLLEtBQUtILE9BQU9ELFFBQVNDLE9BQVFBLE9BQU9ELFFBQVNGLHFCQUcvREcsT0FBT0UsRUFBSSxLQUdYLE9BQU9GLE9BQU9ELFFBS2ZGLG9CQUFvQk8sRUFBSVQsUUFHeEJFLG9CQUFvQlEsRUFBSVQsaUJBR3hCQyxvQkFBb0JTLEVBQUksU0FBU1AsUUFBU1EsS0FBTUMsUUFDL0MsSUFBSVgsb0JBQW9CWSxFQUFFVixRQUFTUSxNQUFPLENBQ3pDRyxPQUFPQyxlQUFlWixRQUFTUSxLQUFNLENBQUVLLFdBQVksS0FBTUMsSUFBS0wsV0FLaEVYLG9CQUFvQmlCLEVBQUksU0FBU2YsU0FDaEMsVUFB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RUFBR3JGLEtBQU1zRixPQUN0QyxJQUFJQyxLQUNKLEdBQUl6QixJQUFJLENBQ0p5QixLQUFPRixFQUFFRyxjQUNOLENBQ0hELEtBQU9GLEVBQUVoRSx3QkFBd0JKLElBRXJDN0UsT0FBT1UsU0FBUyxDQUNabUUsSUFBS3NFLEtBQU8sR0FDWjdHLFNBQVUsV0FLbEJyQyxTQUFTcUgsaUJBQWlCLGdCQUFnQlosUUFBUzJDLE9BQy9DQSxLQUFLNUQsaUJBQWlCLFFBQVMsS0FDM0J1RCx3QkFBd0IvSSxTQUFTMkcsaUJBQWlCeUMsS0FBS0MsUUFBUUMsUUFBUyxLQUFNIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRpOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGw6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge31cbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbi8qKioqKiovIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4vKioqKioqLyBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbi8qKioqKiovIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbi8qKioqKiovIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4vKioqKioqLyBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuLyoqKioqKi8gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbi8qKioqKiovIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4vKioqKioqLyBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbi8qKioqKiovIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbi8qKioqKiovIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuLyoqKioqKi8gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4vKioqKioqLyBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbi8qKioqKiovIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuLyoqKioqKi8gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbi8qKioqKiovIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4vKioqKioqLyBcdFx0cmV0dXJuIG5zO1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4vKioqKioqLyBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbi8qKioqKiovIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4vKioqKioqLyBcdFx0cmV0dXJuIGdldHRlcjtcbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuLyogc21vb3Roc2Nyb2xsIHYwLjQuNCAtIDIwMTkgLSBEdXN0YW4gS2FzdGVuLCBKZXJlbWlhcyBNZW5pY2hlbGxpIC0gTUlUIExpY2Vuc2UgKi9cbihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvLyBwb2x5ZmlsbFxuICBmdW5jdGlvbiBwb2x5ZmlsbCgpIHtcbiAgICAvLyBhbGlhc2VzXG4gICAgdmFyIHcgPSB3aW5kb3c7XG4gICAgdmFyIGQgPSBkb2N1bWVudDtcblxuICAgIC8vIHJldHVybiBpZiBzY3JvbGwgYmVoYXZpb3IgaXMgc3VwcG9ydGVkIGFuZCBwb2x5ZmlsbCBpcyBub3QgZm9yY2VkXG4gICAgaWYgKFxuICAgICAgJ3Njcm9sbEJlaGF2aW9yJyBpbiBkLmRvY3VtZW50RWxlbWVudC5zdHlsZSAmJlxuICAgICAgdy5fX2ZvcmNlU21vb3RoU2Nyb2xsUG9seWZpbGxfXyAhPT0gdHJ1ZVxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGdsb2JhbHNcbiAgICB2YXIgRWxlbWVudCA9IHcuSFRNTEVsZW1lbnQgfHwgdy5FbGVtZW50O1xuICAgIHZhciBTQ1JPTExfVElNRSA9IDQ2ODtcblxuICAgIC8vIG9iamVjdCBnYXRoZXJpbmcgb3JpZ2luYWwgc2Nyb2xsIG1ldGhvZHNcbiAgICB2YXIgb3JpZ2luYWwgPSB7XG4gICAgICBzY3JvbGw6IHcuc2Nyb2xsIHx8IHcuc2Nyb2xsVG8sXG4gICAgICBzY3JvbGxCeTogdy5zY3JvbGxCeSxcbiAgICAgIGVsZW1lbnRTY3JvbGw6IEVsZW1lbnQucHJvdG90eXBlLnNjcm9sbCB8fCBzY3JvbGxFbGVtZW50LFxuICAgICAgc2Nyb2xsSW50b1ZpZXc6IEVsZW1lbnQucHJvdG90eXBlLnNjcm9sbEludG9WaWV3XG4gICAgfTtcblxuICAgIC8vIGRlZmluZSB0aW1pbmcgbWV0aG9kXG4gICAgdmFyIG5vdyA9XG4gICAgICB3LnBlcmZvcm1hbmNlICYmIHcucGVyZm9ybWFuY2Uubm93XG4gICAgICAgID8gdy5wZXJmb3JtYW5jZS5ub3cuYmluZCh3LnBlcmZvcm1hbmNlKVxuICAgICAgICA6IERhdGUubm93O1xuXG4gICAgLyoqXG4gICAgICogaW5kaWNhdGVzIGlmIGEgdGhlIGN1cnJlbnQgYnJvd3NlciBpcyBtYWRlIGJ5IE1pY3Jvc29mdFxuICAgICAqIEBtZXRob2QgaXNNaWNyb3NvZnRCcm93c2VyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHVzZXJBZ2VudFxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzTWljcm9zb2Z0QnJvd3Nlcih1c2VyQWdlbnQpIHtcbiAgICAgIHZhciB1c2VyQWdlbnRQYXR0ZXJucyA9IFsnTVNJRSAnLCAnVHJpZGVudC8nLCAnRWRnZS8nXTtcblxuICAgICAgcmV0dXJuIG5ldyBSZWdFeHAodXNlckFnZW50UGF0dGVybnMuam9pbignfCcpKS50ZXN0KHVzZXJBZ2VudCk7XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBJRSBoYXMgcm91bmRpbmcgYnVnIHJvdW5kaW5nIGRvd24gY2xpZW50SGVpZ2h0IGFuZCBjbGllbnRXaWR0aCBhbmRcbiAgICAgKiByb3VuZGluZyB1cCBzY3JvbGxIZWlnaHQgYW5kIHNjcm9sbFdpZHRoIGNhdXNpbmcgZmFsc2UgcG9zaXRpdmVzXG4gICAgICogb24gaGFzU2Nyb2xsYWJsZVNwYWNlXG4gICAgICovXG4gICAgdmFyIFJPVU5ESU5HX1RPTEVSQU5DRSA9IGlzTWljcm9zb2Z0QnJvd3Nlcih3Lm5hdmlnYXRvci51c2VyQWdlbnQpID8gMSA6IDA7XG5cbiAgICAvKipcbiAgICAgKiBjaGFuZ2VzIHNjcm9sbCBwb3NpdGlvbiBpbnNpZGUgYW4gZWxlbWVudFxuICAgICAqIEBtZXRob2Qgc2Nyb2xsRWxlbWVudFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB4XG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHlcbiAgICAgKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNjcm9sbEVsZW1lbnQoeCwgeSkge1xuICAgICAgdGhpcy5zY3JvbGxMZWZ0ID0geDtcbiAgICAgIHRoaXMuc2Nyb2xsVG9wID0geTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm5zIHJlc3VsdCBvZiBhcHBseWluZyBlYXNlIG1hdGggZnVuY3Rpb24gdG8gYSBudW1iZXJcbiAgICAgKiBAbWV0aG9kIGVhc2VcbiAgICAgKiBAcGFyYW0ge051bWJlcn0ga1xuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gICAgICovXG4gICAgZnVuY3Rpb24gZWFzZShrKSB7XG4gICAgICByZXR1cm4gMC41ICogKDEgLSBNYXRoLmNvcyhNYXRoLlBJICogaykpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGluZGljYXRlcyBpZiBhIHNtb290aCBiZWhhdmlvciBzaG91bGQgYmUgYXBwbGllZFxuICAgICAqIEBtZXRob2Qgc2hvdWxkQmFpbE91dFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfE9iamVjdH0gZmlyc3RBcmdcbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzaG91bGRCYWlsT3V0KGZpcnN0QXJnKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGZpcnN0QXJnID09PSBudWxsIHx8XG4gICAgICAgIHR5cGVvZiBmaXJzdEFyZyAhPT0gJ29iamVjdCcgfHxcbiAgICAgICAgZmlyc3RBcmcuYmVoYXZpb3IgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICBmaXJzdEFyZy5iZWhhdmlvciA9PT0gJ2F1dG8nIHx8XG4gICAgICAgIGZpcnN0QXJnLmJlaGF2aW9yID09PSAnaW5zdGFudCdcbiAgICAgICkge1xuICAgICAgICAvLyBmaXJzdCBhcmd1bWVudCBpcyBub3QgYW4gb2JqZWN0L251bGxcbiAgICAgICAgLy8gb3IgYmVoYXZpb3IgaXMgYXV0bywgaW5zdGFudCBvciB1bmRlZmluZWRcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgZmlyc3RBcmcgPT09ICdvYmplY3QnICYmIGZpcnN0QXJnLmJlaGF2aW9yID09PSAnc21vb3RoJykge1xuICAgICAgICAvLyBmaXJzdCBhcmd1bWVudCBpcyBhbiBvYmplY3QgYW5kIGJlaGF2aW9yIGlzIHNtb290aFxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIHRocm93IGVycm9yIHdoZW4gYmVoYXZpb3IgaXMgbm90IHN1cHBvcnRlZFxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgJ2JlaGF2aW9yIG1lbWJlciBvZiBTY3JvbGxPcHRpb25zICcgK1xuICAgICAgICAgIGZpcnN0QXJnLmJlaGF2aW9yICtcbiAgICAgICAgICAnIGlzIG5vdCBhIHZhbGlkIHZhbHVlIGZvciBlbnVtZXJhdGlvbiBTY3JvbGxCZWhhdmlvci4nXG4gICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGluZGljYXRlcyBpZiBhbiBlbGVtZW50IGhhcyBzY3JvbGxhYmxlIHNwYWNlIGluIHRoZSBwcm92aWRlZCBheGlzXG4gICAgICogQG1ldGhvZCBoYXNTY3JvbGxhYmxlU3BhY2VcbiAgICAgKiBAcGFyYW0ge05vZGV9IGVsXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGF4aXNcbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBoYXNTY3JvbGxhYmxlU3BhY2UoZWwsIGF4aXMpIHtcbiAgICAgIGlmIChheGlzID09PSAnWScpIHtcbiAgICAgICAgcmV0dXJuIGVsLmNsaWVudEhlaWdodCArIFJPVU5ESU5HX1RPTEVSQU5DRSA8IGVsLnNjcm9sbEhlaWdodDtcbiAgICAgIH1cblxuICAgICAgaWYgKGF4aXMgPT09ICdYJykge1xuICAgICAgICByZXR1cm4gZWwuY2xpZW50V2lkdGggKyBST1VORElOR19UT0xFUkFOQ0UgPCBlbC5zY3JvbGxXaWR0aDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBpbmRpY2F0ZXMgaWYgYW4gZWxlbWVudCBoYXMgYSBzY3JvbGxhYmxlIG92ZXJmbG93IHByb3BlcnR5IGluIHRoZSBheGlzXG4gICAgICogQG1ldGhvZCBjYW5PdmVyZmxvd1xuICAgICAqIEBwYXJhbSB7Tm9kZX0gZWxcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gYXhpc1xuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNhbk92ZXJmbG93KGVsLCBheGlzKSB7XG4gICAgICB2YXIgb3ZlcmZsb3dWYWx1ZSA9IHcuZ2V0Q29tcHV0ZWRTdHlsZShlbCwgbnVsbClbJ292ZXJmbG93JyArIGF4aXNdO1xuXG4gICAgICByZXR1cm4gb3ZlcmZsb3dWYWx1ZSA9PT0gJ2F1dG8nIHx8IG92ZXJmbG93VmFsdWUgPT09ICdzY3JvbGwnO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGluZGljYXRlcyBpZiBhbiBlbGVtZW50IGNhbiBiZSBzY3JvbGxlZCBpbiBlaXRoZXIgYXhpc1xuICAgICAqIEBtZXRob2QgaXNTY3JvbGxhYmxlXG4gICAgICogQHBhcmFtIHtOb2RlfSBlbFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBheGlzXG4gICAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNTY3JvbGxhYmxlKGVsKSB7XG4gICAgICB2YXIgaXNTY3JvbGxhYmxlWSA9IGhhc1Njcm9sbGFibGVTcGFjZShlbCwgJ1knKSAmJiBjYW5PdmVyZmxvdyhlbCwgJ1knKTtcbiAgICAgIHZhciBpc1Njcm9sbGFibGVYID0gaGFzU2Nyb2xsYWJsZVNwYWNlKGVsLCAnWCcpICYmIGNhbk92ZXJmbG93KGVsLCAnWCcpO1xuXG4gICAgICByZXR1cm4gaXNTY3JvbGxhYmxlWSB8fCBpc1Njcm9sbGFibGVYO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGZpbmRzIHNjcm9sbGFibGUgcGFyZW50IG9mIGFuIGVsZW1lbnRcbiAgICAgKiBAbWV0aG9kIGZpbmRTY3JvbGxhYmxlUGFyZW50XG4gICAgICogQHBhcmFtIHtOb2RlfSBlbFxuICAgICAqIEByZXR1cm5zIHtOb2RlfSBlbFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZpbmRTY3JvbGxhYmxlUGFyZW50KGVsKSB7XG4gICAgICB3aGlsZSAoZWwgIT09IGQuYm9keSAmJiBpc1Njcm9sbGFibGUoZWwpID09PSBmYWxzZSkge1xuICAgICAgICBlbCA9IGVsLnBhcmVudE5vZGUgfHwgZWwuaG9zdDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGVsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHNlbGYgaW52b2tlZCBmdW5jdGlvbiB0aGF0LCBnaXZlbiBhIGNvbnRleHQsIHN0ZXBzIHRocm91Z2ggc2Nyb2xsaW5nXG4gICAgICogQG1ldGhvZCBzdGVwXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHRcbiAgICAgKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHN0ZXAoY29udGV4dCkge1xuICAgICAgdmFyIHRpbWUgPSBub3coKTtcbiAgICAgIHZhciB2YWx1ZTtcbiAgICAgIHZhciBjdXJyZW50WDtcbiAgICAgIHZhciBjdXJyZW50WTtcbiAgICAgIHZhciBlbGFwc2VkID0gKHRpbWUgLSBjb250ZXh0LnN0YXJ0VGltZSkgLyBTQ1JPTExfVElNRTtcblxuICAgICAgLy8gYXZvaWQgZWxhcHNlZCB0aW1lcyBoaWdoZXIgdGhhbiBvbmVcbiAgICAgIGVsYXBzZWQgPSBlbGFwc2VkID4gMSA/IDEgOiBlbGFwc2VkO1xuXG4gICAgICAvLyBhcHBseSBlYXNpbmcgdG8gZWxhcHNlZCB0aW1lXG4gICAgICB2YWx1ZSA9IGVhc2UoZWxhcHNlZCk7XG5cbiAgICAgIGN1cnJlbnRYID0gY29udGV4dC5zdGFydFggKyAoY29udGV4dC54IC0gY29udGV4dC5zdGFydFgpICogdmFsdWU7XG4gICAgICBjdXJyZW50WSA9IGNvbnRleHQuc3RhcnRZICsgKGNvbnRleHQueSAtIGNvbnRleHQuc3RhcnRZKSAqIHZhbHVlO1xuXG4gICAgICBjb250ZXh0Lm1ldGhvZC5jYWxsKGNvbnRleHQuc2Nyb2xsYWJsZSwgY3VycmVudFgsIGN1cnJlbnRZKTtcblxuICAgICAgLy8gc2Nyb2xsIG1vcmUgaWYgd2UgaGF2ZSBub3QgcmVhY2hlZCBvdXIgZGVzdGluYXRpb25cbiAgICAgIGlmIChjdXJyZW50WCAhPT0gY29udGV4dC54IHx8IGN1cnJlbnRZICE9PSBjb250ZXh0LnkpIHtcbiAgICAgICAgdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcC5iaW5kKHcsIGNvbnRleHQpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzY3JvbGxzIHdpbmRvdyBvciBlbGVtZW50IHdpdGggYSBzbW9vdGggYmVoYXZpb3JcbiAgICAgKiBAbWV0aG9kIHNtb290aFNjcm9sbFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fE5vZGV9IGVsXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHhcbiAgICAgKiBAcGFyYW0ge051bWJlcn0geVxuICAgICAqIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gICAgICovXG4gICAgZnVuY3Rpb24gc21vb3RoU2Nyb2xsKGVsLCB4LCB5KSB7XG4gICAgICB2YXIgc2Nyb2xsYWJsZTtcbiAgICAgIHZhciBzdGFydFg7XG4gICAgICB2YXIgc3RhcnRZO1xuICAgICAgdmFyIG1ldGhvZDtcbiAgICAgIHZhciBzdGFydFRpbWUgPSBub3coKTtcblxuICAgICAgLy8gZGVmaW5lIHNjcm9sbCBjb250ZXh0XG4gICAgICBpZiAoZWwgPT09IGQuYm9keSkge1xuICAgICAgICBzY3JvbGxhYmxlID0gdztcbiAgICAgICAgc3RhcnRYID0gdy5zY3JvbGxYIHx8IHcucGFnZVhPZmZzZXQ7XG4gICAgICAgIHN0YXJ0WSA9IHcuc2Nyb2xsWSB8fCB3LnBhZ2VZT2Zmc2V0O1xuICAgICAgICBtZXRob2QgPSBvcmlnaW5hbC5zY3JvbGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzY3JvbGxhYmxlID0gZWw7XG4gICAgICAgIHN0YXJ0WCA9IGVsLnNjcm9sbExlZnQ7XG4gICAgICAgIHN0YXJ0WSA9IGVsLnNjcm9sbFRvcDtcbiAgICAgICAgbWV0aG9kID0gc2Nyb2xsRWxlbWVudDtcbiAgICAgIH1cblxuICAgICAgLy8gc2Nyb2xsIGxvb3Bpbmcgb3ZlciBhIGZyYW1lXG4gICAgICBzdGVwKHtcbiAgICAgICAgc2Nyb2xsYWJsZTogc2Nyb2xsYWJsZSxcbiAgICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICAgIHN0YXJ0VGltZTogc3RhcnRUaW1lLFxuICAgICAgICBzdGFydFg6IHN0YXJ0WCxcbiAgICAgICAgc3RhcnRZOiBzdGFydFksXG4gICAgICAgIHg6IHgsXG4gICAgICAgIHk6IHlcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIE9SSUdJTkFMIE1FVEhPRFMgT1ZFUlJJREVTXG4gICAgLy8gdy5zY3JvbGwgYW5kIHcuc2Nyb2xsVG9cbiAgICB3LnNjcm9sbCA9IHcuc2Nyb2xsVG8gPSBmdW5jdGlvbigpIHtcbiAgICAgIC8vIGF2b2lkIGFjdGlvbiB3aGVuIG5vIGFyZ3VtZW50cyBhcmUgcGFzc2VkXG4gICAgICBpZiAoYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBhdm9pZCBzbW9vdGggYmVoYXZpb3IgaWYgbm90IHJlcXVpcmVkXG4gICAgICBpZiAoc2hvdWxkQmFpbE91dChhcmd1bWVudHNbMF0pID09PSB0cnVlKSB7XG4gICAgICAgIG9yaWdpbmFsLnNjcm9sbC5jYWxsKFxuICAgICAgICAgIHcsXG4gICAgICAgICAgYXJndW1lbnRzWzBdLmxlZnQgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBhcmd1bWVudHNbMF0ubGVmdFxuICAgICAgICAgICAgOiB0eXBlb2YgYXJndW1lbnRzWzBdICE9PSAnb2JqZWN0J1xuICAgICAgICAgICAgICA/IGFyZ3VtZW50c1swXVxuICAgICAgICAgICAgICA6IHcuc2Nyb2xsWCB8fCB3LnBhZ2VYT2Zmc2V0LFxuICAgICAgICAgIC8vIHVzZSB0b3AgcHJvcCwgc2Vjb25kIGFyZ3VtZW50IGlmIHByZXNlbnQgb3IgZmFsbGJhY2sgdG8gc2Nyb2xsWVxuICAgICAgICAgIGFyZ3VtZW50c1swXS50b3AgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBhcmd1bWVudHNbMF0udG9wXG4gICAgICAgICAgICA6IGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgID8gYXJndW1lbnRzWzFdXG4gICAgICAgICAgICAgIDogdy5zY3JvbGxZIHx8IHcucGFnZVlPZmZzZXRcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIExFVCBUSEUgU01PT1RITkVTUyBCRUdJTiFcbiAgICAgIHNtb290aFNjcm9sbC5jYWxsKFxuICAgICAgICB3LFxuICAgICAgICBkLmJvZHksXG4gICAgICAgIGFyZ3VtZW50c1swXS5sZWZ0ICE9PSB1bmRlZmluZWRcbiAgICAgICAgICA/IH5+YXJndW1lbnRzWzBdLmxlZnRcbiAgICAgICAgICA6IHcuc2Nyb2xsWCB8fCB3LnBhZ2VYT2Zmc2V0LFxuICAgICAgICBhcmd1bWVudHNbMF0udG9wICE9PSB1bmRlZmluZWRcbiAgICAgICAgICA/IH5+YXJndW1lbnRzWzBdLnRvcFxuICAgICAgICAgIDogdy5zY3JvbGxZIHx8IHcucGFnZVlPZmZzZXRcbiAgICAgICk7XG4gICAgfTtcblxuICAgIC8vIHcuc2Nyb2xsQnlcbiAgICB3LnNjcm9sbEJ5ID0gZnVuY3Rpb24oKSB7XG4gICAgICAvLyBhdm9pZCBhY3Rpb24gd2hlbiBubyBhcmd1bWVudHMgYXJlIHBhc3NlZFxuICAgICAgaWYgKGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gYXZvaWQgc21vb3RoIGJlaGF2aW9yIGlmIG5vdCByZXF1aXJlZFxuICAgICAgaWYgKHNob3VsZEJhaWxPdXQoYXJndW1lbnRzWzBdKSkge1xuICAgICAgICBvcmlnaW5hbC5zY3JvbGxCeS5jYWxsKFxuICAgICAgICAgIHcsXG4gICAgICAgICAgYXJndW1lbnRzWzBdLmxlZnQgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBhcmd1bWVudHNbMF0ubGVmdFxuICAgICAgICAgICAgOiB0eXBlb2YgYXJndW1lbnRzWzBdICE9PSAnb2JqZWN0JyA/IGFyZ3VtZW50c1swXSA6IDAsXG4gICAgICAgICAgYXJndW1lbnRzWzBdLnRvcCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IGFyZ3VtZW50c1swXS50b3BcbiAgICAgICAgICAgIDogYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAwXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBMRVQgVEhFIFNNT09USE5FU1MgQkVHSU4hXG4gICAgICBzbW9vdGhTY3JvbGwuY2FsbChcbiAgICAgICAgdyxcbiAgICAgICAgZC5ib2R5LFxuICAgICAgICB+fmFyZ3VtZW50c1swXS5sZWZ0ICsgKHcuc2Nyb2xsWCB8fCB3LnBhZ2VYT2Zmc2V0KSxcbiAgICAgICAgfn5hcmd1bWVudHNbMF0udG9wICsgKHcuc2Nyb2xsWSB8fCB3LnBhZ2VZT2Zmc2V0KVxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgLy8gRWxlbWVudC5wcm90b3R5cGUuc2Nyb2xsIGFuZCBFbGVtZW50LnByb3RvdHlwZS5zY3JvbGxUb1xuICAgIEVsZW1lbnQucHJvdG90eXBlLnNjcm9sbCA9IEVsZW1lbnQucHJvdG90eXBlLnNjcm9sbFRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAvLyBhdm9pZCBhY3Rpb24gd2hlbiBubyBhcmd1bWVudHMgYXJlIHBhc3NlZFxuICAgICAgaWYgKGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gYXZvaWQgc21vb3RoIGJlaGF2aW9yIGlmIG5vdCByZXF1aXJlZFxuICAgICAgaWYgKHNob3VsZEJhaWxPdXQoYXJndW1lbnRzWzBdKSA9PT0gdHJ1ZSkge1xuICAgICAgICAvLyBpZiBvbmUgbnVtYmVyIGlzIHBhc3NlZCwgdGhyb3cgZXJyb3IgdG8gbWF0Y2ggRmlyZWZveCBpbXBsZW1lbnRhdGlvblxuICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ251bWJlcicgJiYgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoJ1ZhbHVlIGNvdWxkIG5vdCBiZSBjb252ZXJ0ZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9yaWdpbmFsLmVsZW1lbnRTY3JvbGwuY2FsbChcbiAgICAgICAgICB0aGlzLFxuICAgICAgICAgIC8vIHVzZSBsZWZ0IHByb3AsIGZpcnN0IG51bWJlciBhcmd1bWVudCBvciBmYWxsYmFjayB0byBzY3JvbGxMZWZ0XG4gICAgICAgICAgYXJndW1lbnRzWzBdLmxlZnQgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyB+fmFyZ3VtZW50c1swXS5sZWZ0XG4gICAgICAgICAgICA6IHR5cGVvZiBhcmd1bWVudHNbMF0gIT09ICdvYmplY3QnID8gfn5hcmd1bWVudHNbMF0gOiB0aGlzLnNjcm9sbExlZnQsXG4gICAgICAgICAgLy8gdXNlIHRvcCBwcm9wLCBzZWNvbmQgYXJndW1lbnQgb3IgZmFsbGJhY2sgdG8gc2Nyb2xsVG9wXG4gICAgICAgICAgYXJndW1lbnRzWzBdLnRvcCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IH5+YXJndW1lbnRzWzBdLnRvcFxuICAgICAgICAgICAgOiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IH5+YXJndW1lbnRzWzFdIDogdGhpcy5zY3JvbGxUb3BcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBsZWZ0ID0gYXJndW1lbnRzWzBdLmxlZnQ7XG4gICAgICB2YXIgdG9wID0gYXJndW1lbnRzWzBdLnRvcDtcblxuICAgICAgLy8gTEVUIFRIRSBTTU9PVEhORVNTIEJFR0lOIVxuICAgICAgc21vb3RoU2Nyb2xsLmNhbGwoXG4gICAgICAgIHRoaXMsXG4gICAgICAgIHRoaXMsXG4gICAgICAgIHR5cGVvZiBsZWZ0ID09PSAndW5kZWZpbmVkJyA/IHRoaXMuc2Nyb2xsTGVmdCA6IH5+bGVmdCxcbiAgICAgICAgdHlwZW9mIHRvcCA9PT0gJ3VuZGVmaW5lZCcgPyB0aGlzLnNjcm9sbFRvcCA6IH5+dG9wXG4gICAgICApO1xuICAgIH07XG5cbiAgICAvLyBFbGVtZW50LnByb3RvdHlwZS5zY3JvbGxCeVxuICAgIEVsZW1lbnQucHJvdG90eXBlLnNjcm9sbEJ5ID0gZnVuY3Rpb24oKSB7XG4gICAgICAvLyBhdm9pZCBhY3Rpb24gd2hlbiBubyBhcmd1bWVudHMgYXJlIHBhc3NlZFxuICAgICAgaWYgKGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gYXZvaWQgc21vb3RoIGJlaGF2aW9yIGlmIG5vdCByZXF1aXJlZFxuICAgICAgaWYgKHNob3VsZEJhaWxPdXQoYXJndW1lbnRzWzBdKSA9PT0gdHJ1ZSkge1xuICAgICAgICBvcmlnaW5hbC5lbGVtZW50U2Nyb2xsLmNhbGwoXG4gICAgICAgICAgdGhpcyxcbiAgICAgICAgICBhcmd1bWVudHNbMF0ubGVmdCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IH5+YXJndW1lbnRzWzBdLmxlZnQgKyB0aGlzLnNjcm9sbExlZnRcbiAgICAgICAgICAgIDogfn5hcmd1bWVudHNbMF0gKyB0aGlzLnNjcm9sbExlZnQsXG4gICAgICAgICAgYXJndW1lbnRzWzBdLnRvcCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IH5+YXJndW1lbnRzWzBdLnRvcCArIHRoaXMuc2Nyb2xsVG9wXG4gICAgICAgICAgICA6IH5+YXJndW1lbnRzWzFdICsgdGhpcy5zY3JvbGxUb3BcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2Nyb2xsKHtcbiAgICAgICAgbGVmdDogfn5hcmd1bWVudHNbMF0ubGVmdCArIHRoaXMuc2Nyb2xsTGVmdCxcbiAgICAgICAgdG9wOiB+fmFyZ3VtZW50c1swXS50b3AgKyB0aGlzLnNjcm9sbFRvcCxcbiAgICAgICAgYmVoYXZpb3I6IGFyZ3VtZW50c1swXS5iZWhhdmlvclxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIEVsZW1lbnQucHJvdG90eXBlLnNjcm9sbEludG9WaWV3XG4gICAgRWxlbWVudC5wcm90b3R5cGUuc2Nyb2xsSW50b1ZpZXcgPSBmdW5jdGlvbigpIHtcbiAgICAgIC8vIGF2b2lkIHNtb290aCBiZWhhdmlvciBpZiBub3QgcmVxdWlyZWRcbiAgICAgIGlmIChzaG91bGRCYWlsT3V0KGFyZ3VtZW50c1swXSkgPT09IHRydWUpIHtcbiAgICAgICAgb3JpZ2luYWwuc2Nyb2xsSW50b1ZpZXcuY2FsbChcbiAgICAgICAgICB0aGlzLFxuICAgICAgICAgIGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IGFyZ3VtZW50c1swXVxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gTEVUIFRIRSBTTU9PVEhORVNTIEJFR0lOIVxuICAgICAgdmFyIHNjcm9sbGFibGVQYXJlbnQgPSBmaW5kU2Nyb2xsYWJsZVBhcmVudCh0aGlzKTtcbiAgICAgIHZhciBwYXJlbnRSZWN0cyA9IHNjcm9sbGFibGVQYXJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICB2YXIgY2xpZW50UmVjdHMgPSB0aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICBpZiAoc2Nyb2xsYWJsZVBhcmVudCAhPT0gZC5ib2R5KSB7XG4gICAgICAgIC8vIHJldmVhbCBlbGVtZW50IGluc2lkZSBwYXJlbnRcbiAgICAgICAgc21vb3RoU2Nyb2xsLmNhbGwoXG4gICAgICAgICAgdGhpcyxcbiAgICAgICAgICBzY3JvbGxhYmxlUGFyZW50LFxuICAgICAgICAgIHNjcm9sbGFibGVQYXJlbnQuc2Nyb2xsTGVmdCArIGNsaWVudFJlY3RzLmxlZnQgLSBwYXJlbnRSZWN0cy5sZWZ0LFxuICAgICAgICAgIHNjcm9sbGFibGVQYXJlbnQuc2Nyb2xsVG9wICsgY2xpZW50UmVjdHMudG9wIC0gcGFyZW50UmVjdHMudG9wXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gcmV2ZWFsIHBhcmVudCBpbiB2aWV3cG9ydCB1bmxlc3MgaXMgZml4ZWRcbiAgICAgICAgaWYgKHcuZ2V0Q29tcHV0ZWRTdHlsZShzY3JvbGxhYmxlUGFyZW50KS5wb3NpdGlvbiAhPT0gJ2ZpeGVkJykge1xuICAgICAgICAgIHcuc2Nyb2xsQnkoe1xuICAgICAgICAgICAgbGVmdDogcGFyZW50UmVjdHMubGVmdCxcbiAgICAgICAgICAgIHRvcDogcGFyZW50UmVjdHMudG9wLFxuICAgICAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHJldmVhbCBlbGVtZW50IGluIHZpZXdwb3J0XG4gICAgICAgIHcuc2Nyb2xsQnkoe1xuICAgICAgICAgIGxlZnQ6IGNsaWVudFJlY3RzLmxlZnQsXG4gICAgICAgICAgdG9wOiBjbGllbnRSZWN0cy50b3AsXG4gICAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBpZiAodHJ1ZSkge1xuICAgIC8vIGNvbW1vbmpzXG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7IHBvbHlmaWxsOiBwb2x5ZmlsbCB9O1xuICB9IGVsc2Uge31cblxufSgpKTtcblxuXG4vKioqLyB9KSxcbi8qIDEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vLyBFU00gQ09NUEFUIEZMQUdcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcblxuLy8gQ09OQ0FURU5BVEVEIE1PRFVMRTogLi9zcmMvanMvY29tcG9uZW50cy92aWRlb1BsYXllci5qc1xuIGNsYXNzIHZpZGVvUGxheWVyIHtcclxuICAgIGNvbnN0cnVjdG9yKHZpZGVvLCBidXR0b24pIHtcclxuICAgICAgICB0aGlzLnZpZGVvID0gdmlkZW87XHJcbiAgICAgICAgdGhpcy5idXR0b24gPSBidXR0b247XHJcbiAgICAgICAgdGhpcy5idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucGxheVZpZGVvKClcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHBsYXlWaWRlbygpIHtcclxuICAgICAgICBpZiAoIXRoaXMudmlkZW8ucGFyZW50Tm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlkZW8uY29udHJvbHMgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnZpZGVvLnBsYXkoKTtcclxuICAgICAgICAgICAgdGhpcy52aWRlby5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy52aWRlby5jb250cm9scyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnZpZGVvLnBhdXNlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uLnBhcmVudE5vZGUuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXG4vLyBDT05DQVRFTkFURUQgTU9EVUxFOiAuL3NyYy9qcy9jb21wb25lbnRzL3BvcHVwRnVuYy5qc1xuY2xhc3MgcG9wdXBGdW5jIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwLCBidXR0b24pIHtcclxuICAgICAgICB0aGlzLmJ1dHRvbiA9IGJ1dHRvbjtcclxuICAgICAgICB0aGlzLnBvcHVwID0gcG9wdXA7XHJcbiAgICAgICAgdGhpcy5vcGVuUG9wdXBGdW5jID0gdGhpcy5vcGVuUG9wdXAuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmNsb3NlUG9wdXBGdW5jID0gdGhpcy5jbG9zZVBvcHVwLmJpbmQodGhpcyk7XHJcbiAgICAgICAgaWYgKCBBcnJheS5pc0FycmF5KHRoaXMuYnV0dG9uKSl7XHJcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uLmZvckVhY2goIGVsZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub3BlblBvcHVwRnVuYyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9wZW5Qb3B1cEZ1bmMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5jbG9zZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZVBvcHVwRnVuYyk7XHJcbiAgICAgICAgdGhpcy5wb3B1cC5wYXJlbnROb2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZVBvcHVwRnVuYyk7XHJcbiAgICB9XHJcbiAgICBvcGVuUG9wdXAoZXZlbnQpe1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy5wb3B1cC5jbGFzc0xpc3QuYWRkKCdvcGVuJyk7XHJcbiAgICAgICAgdGhpcy5wb3B1cC5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ29wZW4nKTtcclxuICAgIH1cclxuICAgIGNsb3NlUG9wdXAoZXZlbnQpe1xyXG4gICAgICAgIGlmICghZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY2xvc2UnKSAmJiBldmVudC50YXJnZXQuY2xvc2VzdCgnLnBvcHVwJykgIT09IG51bGwpe1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTtcclxuICAgICAgICAgICAgdGhpcy5wb3B1cC5wYXJlbnROb2RlLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cbi8vIENPTkNBVEVOQVRFRCBNT0RVTEU6IC4vc3JjL2pzL2NvbXBvbmVudHMvYnVyZ2VyTWVudS5qc1xuY2xhc3MgQnVyZ2VyTWVudXtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwLCBidXJnZXIpIHtcclxuICAgICAgICB0aGlzLmJ1cmdlciA9IGJ1cmdlcjtcclxuICAgICAgICB0aGlzLnBvcHVwID0gcG9wdXA7XHJcbiAgICAgICAgbGV0IHRoaXNPcGVuUG9wdXAgPSB0aGlzLm9wZW5Qb3B1cC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIGxldCB0aGlzQ2xvc2VQb3B1cCA9IHRoaXMuY2xvc2VQb3B1cC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuYnVyZ2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpc09wZW5Qb3B1cCk7XHJcbiAgICAgICAgdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yKCcuY2xvc2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXNDbG9zZVBvcHVwKTtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkZXIgLm9yZGVyLmNsb3NlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzQ2xvc2VQb3B1cCk7XHJcbiAgICAgICAgdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKCdhJykuZm9yRWFjaCggZWxlbSA9PiBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpc0Nsb3NlUG9wdXApKVxyXG4gICAgfVxyXG4gICAgb3BlblBvcHVwKCl7XHJcbiAgICAgICAgdGhpcy5wb3B1cC5jbGFzc0xpc3QuYWRkKCdvcGVuJyk7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVzZXItcGFuZWwnKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxyXG4gICAgfVxyXG4gICAgY2xvc2VQb3B1cCgpe1xyXG4gICAgICAgIHRoaXMucG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicpO1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51c2VyLXBhbmVsJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcclxuICAgIH1cclxufVxuLy8gRVhURVJOQUwgTU9EVUxFOiAuL25vZGVfbW9kdWxlcy9zbW9vdGhzY3JvbGwtcG9seWZpbGwvZGlzdC9zbW9vdGhzY3JvbGwuanNcbnZhciBzbW9vdGhzY3JvbGwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xudmFyIHNtb290aHNjcm9sbF9kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihzbW9vdGhzY3JvbGwpO1xuXG4vLyBDT05DQVRFTkFURUQgTU9EVUxFOiAuL3NyYy9qcy9pbmRleC5qc1xuXHJcblxyXG5cclxuXHJcbnNtb290aHNjcm9sbF9kZWZhdWx0LmEucG9seWZpbGwoKTtcclxuZnVuY3Rpb24gaU9TKCkge1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgJ2lQYWQgU2ltdWxhdG9yJyxcclxuICAgICAgICAgICAgJ2lQaG9uZSBTaW11bGF0b3InLFxyXG4gICAgICAgICAgICAnaVBvZCBTaW11bGF0b3InLFxyXG4gICAgICAgICAgICAnaVBhZCcsXHJcbiAgICAgICAgICAgICdpUGhvbmUnLFxyXG4gICAgICAgICAgICAnaVBvZCdcclxuICAgICAgICBdLmluY2x1ZGVzKG5hdmlnYXRvci5wbGF0Zm9ybSlcclxuICAgICAgICAvLyBpUGFkIG9uIGlPUyAxMyBkZXRlY3Rpb25cclxuICAgICAgICB8fCAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcyhcIk1hY1wiKSAmJiBcIm9udG91Y2hlbmRcIiBpbiBkb2N1bWVudClcclxufVxyXG5cclxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3NlY3Rpb24uaW5mbyAuaW1hZ2UnKSl7XHJcbiAgICBsZXQgYWxsSW1hZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc2VjdGlvbi5pbmZvIC5pbWFnZSBpbWcnKTtcclxuICAgIGxldCBteVNpZW1hID0gbmV3IFNpZW1hKHtcclxuICAgICAgICBzZWxlY3RvcjogJ3NlY3Rpb24uaW5mbyAuaW1hZ2UnLFxyXG4gICAgICAgIGR1cmF0aW9uOiA3MDAsXHJcbiAgICAgICAgZWFzaW5nOiAnZWFzZS1vdXQnLFxyXG4gICAgICAgIHBlclBhZ2U6IDEsXHJcbiAgICAgICAgc3RhcnRJbmRleDogMCxcclxuICAgICAgICBkcmFnZ2FibGU6IGZhbHNlLFxyXG4gICAgICAgIG11bHRpcGxlRHJhZzogdHJ1ZSxcclxuICAgICAgICB0aHJlc2hvbGQ6IDIwLFxyXG4gICAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgICAgcnRsOiBmYWxzZSxcclxuICAgICAgICBvbkluaXQ6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGFsbEltYWdlc1t0aGlzLmN1cnJlbnRTbGlkZV0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9PntcclxuICAgICAgICAgICAgICAgIHRoaXMubmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsbEltYWdlc1t0aGlzLmN1cnJlbnRTbGlkZV0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9LDUwMClcclxuICAgICAgICAgICAgfSw1MDApO1xyXG4gICAgICAgICAgICBzZXRJbnRlcnZhbCggKCk9PntcclxuICAgICAgICAgICAgICAgIGFsbEltYWdlc1t0aGlzLmN1cnJlbnRTbGlkZV0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxJbWFnZXNbdGhpcy5jdXJyZW50U2xpZGVdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sNTAwKVxyXG4gICAgICAgICAgICAgICAgfSw1MDApO1xyXG4gICAgICAgICAgICB9LCA2NTAwKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbn1cclxuXHJcbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmV2aWV3cyAudmlkZW8nKSl7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucmV2aWV3cyAudmlkZW8nKS5mb3JFYWNoKCBlbGVtID0+IHtcclxuICAgICAgICBuZXcgdmlkZW9QbGF5ZXIoZWxlbS5xdWVyeVNlbGVjdG9yKCd2aWRlbycpLCBlbGVtLnF1ZXJ5U2VsZWN0b3IoJy5wbGF5LWJ0bicpKVxyXG4gICAgfSlcclxufVxyXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndyYXBwZXIgLnBvcHVwJykpe1xyXG4gICAgbmV3IHBvcHVwRnVuYyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud3JhcHBlciAucG9wdXAnKSwgW2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlciAub3JkZXInKSwgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2VjdGlvbi5pbmZvIC5idG4nKV0pO1xyXG59XHJcblxyXG5uZXcgQnVyZ2VyTWVudShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkZXIgbmF2JyksZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZGVyIC5idXJnZXInKSk7XHJcblxyXG5mdW5jdGlvbiBTbW9vdGhWZXJ0aWNhbFNjcm9sbGluZyhlLCB0aW1lLCB3aGVyZSkge1xyXG4gICAgbGV0IGVUb3A7XHJcbiAgICBpZiAoaU9TKXtcclxuICAgICAgICBlVG9wID0gZS5vZmZzZXRUb3A7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGVUb3AgPSBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcclxuICAgIH1cclxuICAgIHdpbmRvdy5zY3JvbGxUbyh7XHJcbiAgICAgICAgdG9wOiBlVG9wIC0gNTAsXHJcbiAgICAgICAgYmVoYXZpb3I6IFwic21vb3RoXCJcclxuICAgIH0pXHJcbn1cclxuXHJcblxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdoZWFkZXIgbmF2IGEnKS5mb3JFYWNoKCBsaW5rID0+IHtcclxuICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgU21vb3RoVmVydGljYWxTY3JvbGxpbmcoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgJHtsaW5rLmRhdGFzZXQuaHJlZn1gKSwgMTUwMCwgJ3RvcCcpXHJcbiAgICB9KVxyXG59KTtcblxuLyoqKi8gfSlcbi8qKioqKiovIF0pOyJdLCJmaWxlIjoibWFpbi1taW4uanMifQ==
